性能优化
==================
# 1、总体目标
性能优化的目的提高用户体验，对于用户来说表现为：
  流畅
  稳定
  省电、省流量
  安装包小
  
  对于程序员来说则是尽量减少内存消耗、提高运行效率、减少代码冗余等...
  
# 2、原理
 ## 2.1、 流畅
  ### 卡顿的场景有很多，按场景可以分为4类：UI 绘制、应用启动、页面跳转、事件响应，如图：
  ![卡顿场景]（#pic/）
  这4种卡顿场景的根本原因可以分为两大类：

  界面绘制。主要原因是绘制的层级深、页面复杂、刷新不合理，由于这些原因导致卡顿的场景更多出现在 UI 和启动后的初始界面以及跳转到页面的绘制上。
  数据处理。导致这种卡顿场景的原因是数据处理量太大，一般分为三种情况，
    一是数据在处理 UI 线程，
    二是数据处理占用 CPU 高，导致主线程拿不到时间片，
    三是内存增加导致 GC 频繁，从而引起
    
 ### 卡顿根本原因
  根据Android 系统显示原理可以看到，影响绘制的根本原因有以下两个方面：
  绘制任务太重，绘制一帧内容耗时太长。
  主线程太忙，根据系统传递过来的 VSYNC 信号来时还没准备好数据导致丢帧
主线程主要做以下几个方面工作：
 ### UI 生命周期控制
  系统事件处理
  消息处理
  界面布局
  界面绘制
  界面刷新
  除此之外，应该尽量避免将其他处理放在主线程中，特别复杂的数据计算和网络请求等。
  
# 3、优化方案
 ## 3.1、布局优化（思路：选择性能耗少布局、减少层级嵌套、提高布局复用性、减少测量和绘制时间）
   优化点:
  - 避免OverDraw
  - 优化布局层级
  - 避免过多无用嵌套
  - 使用标签 重用layout
  - 尽量避免使用权重，其会导致绘制两遍
  - 使用延迟加载
  - 尽可能少用wrap_content。wrap_content会增加布局 measure时计算成本，在已知宽高为固定值时，不用wrap_content。
  - Hierarchy View  layout inspace进行层级分析
  
  ## 3.2、内存优化
    内存优化的点有很多,这里我主要分为两大块:
    ###  Bitmap优化
      主动释放Bitmap资源，手动调用recycle()方法，释放其Native内存
      主动释放ImageView的图片资源，避免大图小view显示
      Png图，NinePatch图多重考虑
      使用大图之前，尽量先对其进行压缩（尺寸或者清晰度）
