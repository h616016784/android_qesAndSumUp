
# 一、项目组件化的技术基础以及拆分方案
  目前项目模块化大体可以分为两种模式，分别是submodule和multi-project。根据字面意思，我们就可以很容易理解这两种模式，
 ## 1、submodule模式
项目中只有一个project工程，在project中构建多个module组件，每个module都有自己的git仓库，非常直观，这也是我们最常见的模块化架构。

优点
架构直观，可以让加入开发的新成员比较快速的理解项目的构建
团队协作灵活，在项目开发阶段（特别是起始不稳定的阶段），有更多的module依赖选择，例如直接依赖project，或者通过aar/jar依赖，或者是maven依赖，可以更加快速的进行开发调试

缺点
整个project的git分支会很复杂
团队协作的时候，大家都是在同一个app模块中做测试自己开发的模块，比较容易产生冲突
因为所有的module都在一个project中，每个人都可以修改他人负责的module，不是很安全
## 2、multi-project模式
这种模式是将每个功能模块都拆分成一个单独的功能project，每个功能project都至少包含自己测试使用的app模块和功能模块这两个module。此外，还有一个专门的project用来作为app壳工程，组合所有的功能模块。这样每个project都有自己的单独的git仓库和单独的测试使用的app模块。

优点
每个project有自己单独的git仓库，减少项目的git复杂度
每个project有自己的app模块用于测试，避免影响他人
开发成员只需要负责自己的project，不需要关注其他的功能模块，更加专注
开发成员只能关注自己负责的功能模块，无法修改到其他人负责的功能模块，更加安全
更加解耦

缺点
对于新加入的开发成员不是很友好，不能直观的了解项目的构建
需要在项目开发前达成一些规范协议，否则在协作时容易产生冲突，比如资源文件的命名，如果在两个module中出现命名一样的资源文件，则会报错
因为每个功能都是单独的project，所以开发调式时，只能使用aar/jar或者maven来依赖需要的module，不如submodule模式灵活，在项目初期不稳定时的开发成本要高于submodule模式
会增大项目的体积

项目初期我们通常会选择第一种，下面也是主要说的第一种方式
# 二、业务抽层
## 1、基于第一种方案的业务抽层
基本上都是按照这个思路

# 三、技术要点
## 1、基于第一种方案的技术要点
### a、Library module开发的难点
在把代码抽取到各个单独的Library Module中，会遇到各种问题。最常见的就是R文件问题，Android开发中，各个资源文件都是放在res目录中，在编译过程中，会生成R.java文件。R文件中包含有各个资源文件对应的id，这个id是静态常量，但是在Library Module中，这个id不是静态常量，那么在开发时候就要避开这样的问题。

举个常见的例子，同一个方法处理多个view的点击事件，有时候会使用switch(view.getId())这样的方式，然后用case R.id.btnLogin这样进行判断，这时候就会出现问题，因为id不是经常常量，那么这种方式就用不了。

同样开发时候，用的最多的一个第三方库就是ButterKnife，ButterKnife也是不可以用的，在使用ButterKnife的时候，需要用到注解配置一个id来找到对应view，或者绑定对应的各种事件处理，但是注解中的各个字段的赋值也是需要静态常量，那么就不能够使用ButterKnife了。

解决方案有下面几种：

1.重新一个Gradle插件，生成一个R2.java文件，这个文件中各个id都是静态常量，这样就可以正常使用了。

2.使用Android系统提供的最原始的方式，直接用findViewById以及setOnClickListener方式。

3.设置项目支持Databinding，然后使用Binding中的对象，但是会增加不少方法数，同时Databinding也会有编译问题和学习成本，但是这些也是小问题，个人觉的问题不大。

上面是主流的解决方法，个人推荐的使用优先级为 3 > 2 > 1。

当把个模块分开以后，每个人就可以单独分组对应的模块就行了，不过会有资源冲突问题，个人建议是对各个模块的资源名字添加前缀，比如user模块中的登录界面布局为activity_login.xml，那么可以写成这样us_activity_login.xml。这样就可以避免资源冲突问题。同时Gradle也提供的一个字段resourcePrefix，确保各个资源名字正确，具体用法可以参考官方文档。
### b、

# 四、项目中组件化开发的管理小技巧
## 1、基于第一种方案的小技巧
 ### a、android studio统一管理版本号
 参考地址[Android Studio Gradle 版本统一管理](https://www.jianshu.com/p/63e08c6eb1c6)
